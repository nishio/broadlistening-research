# クラスタリング手法の比較実験

## 目的
- k-meansとHDBSCANのクラスタリング結果を比較
- クラスタ数とクラスタサイズの分布を分析

## 実験手順
1. HDBSCANクラスタリングの実行
   - パラメータ: min_cluster_size=5, max_cluster_size=30, min_samples=2
   - 結果の保存: experiments/results/hdbscan_detailed_metrics.csv

2. HDBSCANの結果に基づくk-meansクラスタリング
   - 同じクラスタ数のk-means
   - 同じ平均クラスタサイズのk-means
   - 結果の保存: experiments/results/kmeans_same_n_metrics.csv, kmeans_same_size_metrics.csv

3. メトリクスの比較と可視化
   - size: クラスタサイズの分布
   - avg_distance: クラスタ内の平均距離
   - max_distance: クラスタ内の最大距離
   - density: クラスタの密度

## 実験結果

### HDBSCANクラスタリング
- クラスタ数: 66
- 平均クラスタサイズ: 8.06
- ノイズポイントの数: 9351
- 有効なデータポイント数: 532（全9883ポイント中）

### k-meansクラスタリング（同じクラスタ数）
- クラスタ数: 66
- データポイント数: 9883（ノイズポイントなし）
- 平均クラスタサイズ: 149.74（9883/66）

### k-meansクラスタリング（同じ平均サイズ）
- クラスタ数: 1226
- データポイント数: 9883（ノイズポイントなし）
- 平均クラスタサイズ: 8.06（9883/1226）

### メトリクスの比較
各メトリクスの分布をヒストグラムで可視化しました：

1. データセットXとHDBSCANの比較
   ![メトリクス比較](../experiments/results/comparison_histograms.png)

   - データセットX（k=1226からサイズ5以上、密度上位66件）とHDBSCANの比較
   - クラスタサイズ：両方とも小規模クラスタが中心
   - 平均距離：データセットXの方が全体的に小さい値を示す（より密集）
   - 最大距離：データセットXの方が小さい値に集中（コンパクトなクラスタ）
   - 密度：データセットXは高密度クラスタを優先的に選択しているため、高い値を示す

2. 特徴的な観察結果
   - クラスタサイズ：データセットXとHDBSCANはともに5-20程度の小規模クラスタが主体
   - 平均距離：データセットXは0.4-0.8の範囲に集中し、より密集したクラスタを形成
   - 最大距離：データセットXは0.6-1.0の範囲に集中し、コンパクトな形状を示す
   - 密度：データセットXは1.4-2.5の高密度範囲に分布し、より密集したクラスタを選択していることを確認

## 考察
1. データセットXの特徴
   - k=1226のクラスタから、サイズ5以上の高密度クラスタを66件抽出
   - 密度が1.4-2.5の範囲に分布し、非常にコンパクトなクラスタを形成
   - クラスタサイズは5-20程度の小規模クラスタが中心

2. HDBSCANとの比較
   - クラスタ数（66）は同じだが、クラスタの特性が異なる
   - データセットXの方が全体的に密度が高く、より密集したクラスタを形成
   - クラスタサイズの分布は両者で類似（小規模クラスタが中心）

3. 手法の特徴比較
   - HDBSCAN: 自然な密度ベースのクラスタリングを実現、ノイズ点を許容
   - データセットX: k-meansの結果から高密度なクラスタのみを選択的に抽出
   - 両手法とも小規模で密集したクラスタを重視する点で共通

## 結論
- HDBSCANは密集した明確なクラスタのみを抽出し、大部分のデータをノイズとして分類
- k-meansは全データポイントを指定された数のクラスタに分配
- クラスタ数とクラスタサイズのトレードオフが存在することが確認された
