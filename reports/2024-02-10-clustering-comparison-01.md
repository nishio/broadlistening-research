# クラスタリング手法の比較実験レポート（2024-02-10-01）

## 実験目的
同一のデータに対するHDBSCANとk-meansの結果を比較し、以下の観点から評価を行う：
- 実行時間とメモリ消費量
- 得られたクラスタの性質（密度やサイズ）

## データセット
- パブコメの埋め込みベクトル（embeddings.pkl）
- サイズ: 9,883件
- 次元数: 3,072次元
- 特徴: 個人および組織からのパブコメを含む

## 実験結果

### 1. HDBSCANクラスタリング
- パラメータ設定:
  * min_cluster_size=5
  * max_cluster_size=30
  * min_samples=2
  * core_dist_n_jobs=-1（並列処理）

#### 性能指標
- 実行時間: 約7.0分
- メモリ使用量: 約1.6GB

#### クラスタリング結果
- クラスタ数: 66
- ノイズポイント: 9,351件（94.6%）
- クラスタサイズ: 5-30ポイント/クラスタ
- 特徴:
  * 密度ベースのクラスタリングにより、密度の高い部分のみをクラスタとして抽出
  * 大多数のデータポイントがノイズとして分類
  * クラスタサイズの上限（30）により、大きなクラスタの形成を抑制

### 2. k-meansクラスタリング
- 実験設定: k=50, 100, 200でのクラスタリング
- random_state=42（再現性のため）

#### 性能指標
- 実行時間: 約0.1分
- メモリ使用量: 約1.6GB

#### クラスタリング結果
1. k=50
   - 平均クラスタサイズ: 198ポイント
   - 特徴: 比較的大きな粒度でのグループ化

2. k=100
   - 平均クラスタサイズ: 99ポイント
   - 特徴: 中程度の粒度でのグループ化

3. k=200
   - 平均クラスタサイズ: 49ポイント
   - 特徴: より細かい粒度でのグループ化

- 全体的な特徴:
  * クラスタサイズが均一に分布
  * ノイズポイントの概念がなく、全データポイントをいずれかのクラスタに割り当て
  * クラスタ数を明示的に指定可能

## 比較分析

### 1. 計算効率
- HDBSCANは計算時間が長い（7.0分）が、密度に基づく意味のあるクラスタを抽出
- k-meansは高速（0.1分）だが、密度を考慮せずにクラスタリングを実行
- メモリ使用量は両手法とも同程度（約1.6GB）

### 2. クラスタの性質
- HDBSCAN:
  * 密度ベースの自然なクラスタを抽出
  * ノイズ除去により、高品質なクラスタを形成
  * クラスタ数を自動的に決定

- k-means:
  * 均一なサイズのクラスタを形成
  * 密度の違いを考慮しない
  * クラスタ数の明示的な指定が必要

### 3. 用途による適性
- HDBSCAN:
  * 密度の高い意味のあるクラスタの抽出が重要な場合
  * ノイズの除去が必要な場合
  * クラスタ数が事前に不明な場合

- k-means:
  * データを均等に分割する必要がある場合
  * 計算速度が重要な場合
  * クラスタ数が既知の場合

## 結論
- HDBSCANは密度ベースの高品質なクラスタリングを提供するが、計算コストが高い
- k-meansは高速で均一なクラスタリングを提供するが、密度を考慮しない
- 用途に応じて適切な手法を選択する必要がある
